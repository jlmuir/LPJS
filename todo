
Make sure dispatchd doesn't hang waiting for munge credentials after checkin

More robust RC scripts, e.g.:

munged_stop()
{
    echo "Stopping $name."
    pids="$(pgrep -d ' ' $name)"
    if [ -n "$pids" ]; then
	echo "Waiting for PIDs: $pids"
	for signal in TERM INT QUIT KILL
	do
	    kill -s $signal $pids
	    sleep 1
	    pids=$(pgrep -d ' ' $name)
	    if [ -z "$pids" ]; then
		break
	    fi
	done
    fi
    rm -f $pidfile
}

Require MB, MiB, GB, or GiB on all memory specs in job scripts

Allow running compd as non-root
    Only the user running compd can execute jobs on that node
    as only root can impersonate another user using setuid()

systemctl restart lpjs_compd doesn't work
    Waiting a while and running restart again starts the daemon

Don't run dispatchd as root?  Create lpjs account?

Terminate jobs that exceed their resource allocation
    Only if there are jobs in the queue

Report peak resource use compared to specified

Doc:
    Submission: All jobs under one "lpjs submit" command
    Job: An independent computational run
	Serial
	Multithreaded
	MPI
    Config file can be the same on all nodes, but the compute nodes
    only need the head node listed

Required submission parameters
    Jobs
    Processors per job
	Processor as defined by sysconf(_SC_NPROCESSORS_CONF)
	or getconf _NPROCESSORS_CONF
    Nodes per job
    pmem per job or pmem per core
    vmem per job or vmem per core
    
    Array: Jobs > 1
    Multithreaded: nodes per job = 1, cores per job = # or "all"
    MPI: Cores per job > 1

Optional submission parameters
    has_command, where command is any program in the standard PATH on node
	PATH may differ across compute nodes, as they may run different OSs

lpjs shell

lpjs cancel job|submission-#

Basic queuing system
    Core/memory tracking
    Track actual vs stated memory use?

Implement virtual memory limit checks
    Document that this is enforced by ulimit() and unbreakable

Implement real memory limit checks
    Document that this is enforced by periodic sampling

Convert sbatch scripts to lpjs and vice versa
